datasource db {
  provider = "postgresql"
  url      = env("DATASOURCE_URL")
}

generator client {
  provider = "prisma-client-js"
}

// ----- User -----

model User {
  id              String    @id @unique
  login           String    @unique
  role            UserRole? @default(USER)
  profileImageUrl String?
  color           String    @default("#333333")
  createdAt       DateTime  @default(now())

  record Record[]

  @@index([id, login])
  @@map("users")
}

enum UserRole {
  USER
  ADMIN
}

// ----- Record -----

model Record {
  id        Int     @id @default(autoincrement())
  title     String
  link      String
  posterUrl String?

  status  RecordStatus @default(QUEUE)
  type    RecordType   @default(HANDWRITTEN)
  genre   RecordGenre?
  grade   RecordGrade?
  episode String?

  user   User?   @relation(fields: [userId], references: [id])
  userId String?

  createdAt DateTime @default(now())

  @@index([title])
  @@map("records")
}

enum RecordStatus {
  QUEUE
  PROGRESS
  DROP
  UNFINISHED
  DONE
}

enum RecordType {
  HANDWRITTEN
  SUGGESTION
  AUCTION
  ORDER
}

enum RecordGenre {
  GAME
  MOVIE
  ANIME
  CARTOON
  SERIES
}

enum RecordGrade {
  DISLIKE
  BEER
  LIKE
  RECOMMEND
}

// ----- Limit -----

model Limit {
  name     LimitType @unique
  quantity Int       @default(5)

  @@map("limits")
}

enum LimitType {
  SUGGESTION
}
